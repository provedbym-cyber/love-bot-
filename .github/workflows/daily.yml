name: Daily Love Message

on:
  schedule:
    - cron: '5 5 * * *'   # 07:05 по Берлину летом (GitHub в UTC)
  workflow_dispatch:

jobs:
  send:
    runs-on: ubuntu-latest
    steps:
      - name: Pick message
        id: msg
        run: |
          msgs=(
            "Доброе утро, любовь моя 🌸"
            "Ты сегодня прекрасна, как всегда ✨"
            "Напоминаю: ты сильная, смелая и настоящая 💛"
            "Сегодня отличный день, чтобы улыбнуться ☀️"
            "Я горжусь тобой — даже если ты этого не видишь 💌"
            "Ты моё любимое чудо этого мира 🌷"
            "Улыбнись — это лучшее начало дня 💖"
            "Сегодня ты сделаешь что-то важное, даже если ещё не знаешь об этом 🌼"
            "Я рядом, даже если мы молчим 🤍"
            "Пусть сегодня всё сложится для тебя легко 🌿"
            "Я верю в тебя безусловно 🌠"
            "Мир становится мягче, когда ты улыбаешься 🌹"
          )
          msg=${msgs[$RANDOM % ${#msgs[@]}]}
          echo "text=$msg" >> $GITHUB_OUTPUT

      - name: Send to Telegram
        env:
          TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.CHAT_ID }}
          TEXT: ${{ steps.msg.outputs.text }}
        run: |
          curl -G "https://api.telegram.org/bot$7933158417:AAEIS06I_HEayv2qeWbsVKKagBUL5ZmRUnc/sendMessage" \
               --data-urlencode "chat_id=$CHAT_ID" \
               --data-urlencode "text=$TEXT"
