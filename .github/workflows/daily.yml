name: Daily Love Message

on:
  schedule:
    - cron: '5 5 * * *'   # 07:05 –ø–æ –ë–µ—Ä–ª–∏–Ω—É –ª–µ—Ç–æ–º (GitHub = UTC)
  workflow_dispatch:

jobs:
  send:
    runs-on: ubuntu-latest
    steps:
      - name: Pick message
        id: msg
        shell: bash
        run: |
          msgs=(
            "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ, –ª—é–±–æ–≤—å –º–æ—è üå∏"
            "–¢—ã —Å–µ–≥–æ–¥–Ω—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞, –∫–∞–∫ –≤—Å–µ–≥–¥–∞ ‚ú®"
            "–ù–∞–ø–æ–º–∏–Ω–∞—é: —Ç—ã —Å–∏–ª—å–Ω–∞—è, —Å–º–µ–ª–∞—è –∏ –Ω–∞—Å—Ç–æ—è—â–∞—è üíõ"
            "–°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å, —á—Ç–æ–±—ã —É–ª—ã–±–Ω—É—Ç—å—Å—è ‚òÄÔ∏è"
            "–Ø –≥–æ—Ä–∂—É—Å—å —Ç–æ–±–æ–π ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —Ç—ã —ç—Ç–æ–≥–æ –Ω–µ –≤–∏–¥–∏—à—å üíå"
            "–¢—ã –º–æ—ë –ª—é–±–∏–º–æ–µ —á—É–¥–æ —ç—Ç–æ–≥–æ –º–∏—Ä–∞ üå∑"
            "–£–ª—ã–±–Ω–∏—Å—å ‚Äî —ç—Ç–æ –ª—É—á—à–µ–µ –Ω–∞—á–∞–ª–æ –¥–Ω—è üíñ"
            "–°–µ–≥–æ–¥–Ω—è —Ç—ã —Å–¥–µ–ª–∞–µ—à—å —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –µ—â—ë –Ω–µ –∑–Ω–∞–µ—à—å –æ–± —ç—Ç–æ–º üåº"
            "–Ø —Ä—è–¥–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –º—ã –º–æ–ª—á–∏–º ü§ç"
            "–ü—É—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è –≤—Å—ë —Å–ª–æ–∂–∏—Ç—Å—è –¥–ª—è —Ç–µ–±—è –ª–µ–≥–∫–æ üåø"
            "–Ø –≤–µ—Ä—é –≤ —Ç–µ–±—è –±–µ–∑—É—Å–ª–æ–≤–Ω–æ üå†"
            "–ú–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º—è–≥—á–µ, –∫–æ–≥–¥–∞ —Ç—ã —É–ª—ã–±–∞–µ—à—å—Å—è üåπ"
          )
          echo "text=${msgs[$RANDOM % ${#msgs[@]}]}" >> "$GITHUB_OUTPUT"

      - name: Send to Telegram (simple, like on laptop)
        shell: bash
        env:
          TOKEN: ${{ secrets.TELEGRAM_TOKEN }}   # —Å–µ–∫—Ä–µ—Ç –±–µ–∑ –∫–∞–≤—ã—á–µ–∫/–ø—Ä–æ–±–µ–ª–æ–≤!
          CHAT_ID: "474964009"                   # —Ç–≤–æ–π id —á–∏—Å–ª–æ–º
          TEXT: ${{ steps.msg.outputs.text }}
        run: |
          set -e
          # –º–∏–Ω–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ç–æ–∫–µ–Ω —Ä–µ–∞–ª—å–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏–ª—Å—è
          if [ -z "$TOKEN" ]; then echo "TOKEN is empty"; exit 1; fi
          URL="https://api.telegram.org/bot${TOKEN}/sendMessage"
          curl -sS -G "$URL" \
               --data-urlencode chat_id=$CHAT_ID \
               --data-urlencode "text=$TEXT" \
               --fail
